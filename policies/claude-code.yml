# ACP Policy Preset — Claude Code
# Sensible defaults for running Claude Code under ACP.

default: ask

wrap:
  - rm
  - rmdir
  - curl
  - wget
  - ssh
  - git
  - gh
  - docker
  - pip
  - npm

rules:
  # Claude Code API traffic
  - match: { kind: http, host: "*.anthropic.com" }
    action: allow
  - match: { kind: http, host: "*.claude.ai" }
    action: allow
  - match: { kind: http, host: "*.sentry.io" }
    action: allow

  # Safe read commands
  - match: { name: "cat" }
    action: allow
  - match: { name: "ls" }
    action: allow
  - match: { name: "head" }
    action: allow
  - match: { name: "tail" }
    action: allow
  - match: { name: "grep" }
    action: allow
  - match: { name: "find" }
    action: allow

  # Git read operations
  - match: { name: "git", args: "status*" }
    action: allow
  - match: { name: "git", args: "log*" }
    action: allow
  - match: { name: "git", args: "diff*" }
    action: allow

  # Destructive commands — deny
  - match: { name: "rm", args: "-rf /*" }
    action: deny
  - match: { name: "rm", args: "-rf /" }
    action: deny
